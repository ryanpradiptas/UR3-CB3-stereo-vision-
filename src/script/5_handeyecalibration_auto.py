#!/usr/bin/env python3

import sys
import rospy
import moveit_commander
from math import radians

# Initialize moveit_commander and rospy
moveit_commander.roscpp_initialize(sys.argv)
rospy.init_node('ur3_move_keyboard', anonymous=True)

# Instantiate a `MoveGroupCommander` object for the UR3 manipulator
group = moveit_commander.MoveGroupCommander("manipulator")  # ur3 moveit group name: manipulator

# List of joint angles in radians for calibration
joint_angles_list = [
    [0.6993244522070006, 0.06415436101979775, -2.349683050349113, -0.856472622109878, -0.6992124960135304, 0.0008992728959741403],
    [0.7419730529543624, 0.19850507403443274, -2.203571648198107, -0.8926107175718379, -0.7419214292037801, 0.07566863031768989],
    [0.7420271569754124, 0.10743510543782975, -2.219096969195853, -0.9233181889127966, -0.7418389718127698, 0.075602813813056],
    [1.084960686094304, -0.9468338676513033, 1.2812993819165353, 2.973074149752936, -1.2809254303740556, 0.008766161235242887],
    [1.1961143157663825, -0.9518549275660071, 1.3123179498338597, 2.8312339856465734, -1.2809378999093144, 0.00873841773214945],
    [1.2567545887427123, -0.9215806592295746, 1.3424874616074431, 2.831323214072114, -1.2809544646214603, 0.008799178056033696],
    [1.3777197881082577, -0.9823999415418765, 1.5087767929027365, 2.8315800689747928, -1.2809058033350218, 0.00876168045260517],
    [-1.2123332973503664, -2.067462348928349, -1.4642496308416189, 0.13836236394434798, 1.4643567340560086, 0.0004308900389849795],
    [-1.3172195536775915, -2.136833151173107, -1.4035080552097936, 0.2562566488553992, 1.4988873791390396, 0.000362991047765604],
    [-1.3777117482062788, -2.136944346266392, -1.3881154115098102, 0.2262863686261296, 1.4382725683977653, 0.0003150124724617953],
    [-1.3194823484212561, -2.3280188937082738, -1.2458750381911914, 0.2857840532558029, 1.2870140590025332, 1.0446268797265104],
    [-1.2566534557269815, -2.3490779906359123, -1.2481986148685529, 0.2854020464903382, 1.4383472652426579, 1.8319307412280814],
    [-1.2815874329147956, -2.34900850048355, -1.1657322527964942, 0.16601002546804633, 1.0749706662174021, 3.194633632734689],
    [-1.165750023129096, -2.37937951824724, -1.1604562413472772, 0.16517612727370778, 1.1961222537104814, 4.375431614810536],
    [-1.1658232863636853, -2.4397834380309984, -1.2510645472907314, 0.16469861015762177, 1.196229962353676, 5.04168176238248],
    [-1.3475516166393504, -2.470107134667078, -1.2530490514688566, 0.3783187134554735, 1.4989366401815896, 5.041612687621402],
    [-1.25486004332231, -2.4721974383032057, -1.1960558528634753, 0.5605433570919542, 1.1657678067753001, 5.556514749293607],
    [-1.1657855714858272, -2.500264682644082, -1.2204796093004848, 0.742411225624962, 1.3475051518011703, 5.798605722171826],
    [1.0501316449240858, -0.8720697171436848, 1.3676183923294252, -3.319569759253229, -1.3677309494202659, 0.0005451536070695206],
    [1.373821342047579, -0.9212737149008463, 1.2567227939133234, -3.316679128870984, -1.2566870801157406, 1.0143890775145685],
    [1.3738295856747946, -0.7697479262856994, 1.2974688470752866, -3.6177026642051295, -1.4382517343767813, 2.589045474844877],
    [1.373782571312506, -0.7091249764301528, 1.3275258270084107, -3.708706855253963, -1.4079896241875383, 4.042373928911214],
    [1.3738598349300384, -1.133790582615946, 1.7515476371585432, -3.7081825826030244, -1.4685255806915225, 5.556422240321645],
    [0.7816871477652352, -0.7508355320289583, 1.1035746335460035, -3.1729190835233463, -1.1037308278337368, 0.0002765428812952159],
    [1.0749908297191704, -0.8001553407794662, 1.266957509607761, -3.466746156142939, -1.1038294950288212, 2.3163943549636254],
    [1.2263795768714836, -0.7957720124923702, 1.251716919989124, -3.466247602364591, -1.1037379834059142, 3.8001014010623084],
    [1.2869427271224296, -0.7935523916575171, 1.2213068107012504, -3.4660353097674736, -1.1960002450178506, 5.34444259016264],
    [1.2364090160195254, -0.7675964722414292, 1.408138274669498, -3.4656650272989005, -1.4988157757446259, 5.344364256385235],
    [1.408138274669498, -0.7675964722414292, 1.2364090160195254, -3.4656650272989005, -1.4988157757446259, 5.344364256385235],
    [1.2362064564238455, -0.7699146154580028, 1.5292473304872605, -3.3758935078984322, -1.4987491177805219, 5.556377462783022],
    [1.5292473304872605, -0.7699146154580028, 1.2362064564238455, -3.3758935078984322, -1.4987491177805219, 5.556377462783022],
    [1.2359520525469803, -0.769987847293244, 1.619980808058128, -3.588490376301685, -1.831859475957867, 5.73804179984048],
    [1.619980808058128, -0.769987847293244, 1.2359520525469803, -3.588490376301685, -1.831859475957867, 5.73804179984048],
    [1.7410817242490637, -0.6790498511037653, 1.2379718392434045, -3.5885130558348397, -1.9227132228739898, -5.7766904069112e-06],
    [0.9959287269907646, -0.709430089218248, 1.4140176238760576, -3.4966517097257666, -1.414058315739213, 0.011581466970116382],
    [1.3171367681289983, -0.7050839945947667, 1.1906463994757042, -3.4963295014060236, -1.4140178796915985, 2.1650579955708196],
    [1.8885658498425073, -1.5890415354929752, 1.7963100268008603, -3.2868893018098735, -1.8298719579971583, -0.015192638849889306],
    [1.6810900267275946, -1.5884155988524666, 1.798517146688111, -3.2882649992147144, -1.82780625329251, -0.015255212131395801],
    [-1.3772531008097042, -2.1368885952169414, -1.4339379275701702, 0.2850626695107188, 1.4683676495933553, 0.0005324400808230934],
    [-1.3768455903282044, -2.1390560024134926, -1.3582640139410325, 0.37609633024251643, 1.4099743233232593, 0.0005654563923105371],
    [1.3177024249718032, -1.4069655822902307, 1.7508502978455613, -3.6277503715782426, -1.3453421124246412, 0.0005371309391835055],
    [1.1663699304689796, -1.405980646021404, 1.8718671462109082, -3.6292846494285183, -1.3433540088970202, 0.0005297164036877078],
    [1.3176401966773694, -0.8913522575634056, 1.2966593223125367, -3.321752935095935, -1.363702025491055, 0.00045764939721060216],
    [1.348056312345947, -0.8913621875635451, 1.1603906149189047, -3.4688874473243754, -1.3615971418255541, 0.0005284503963496334],
    [1.3480408152734622, -0.6184242232145527, 0.8425983495754146, -3.166587872654649, -1.3153587474065973, 0.00026164389839067326],
    [1.3484584939871302, -0.5879924521728688, 0.6608749320746119, -3.167990634835629, -1.3132791856225468, 0.0003382683701644851],
    [-1.4075928496302659, -2.0761423721851218, -1.3431092976178425, 0.19428449547215898, 1.4540482118201363, 0.00027533297782156296],
    [-1.2257768540471154, -2.1672232008228445, -1.2977396636069338, 0.1334186597595215, 1.1980674228698969, 0.00030841418613025695],
    [1.16634218379685, -0.7464678066771544, 1.107932495583599, -3.174975996591087, -1.1000194180192637, 0.00017191947393602192],
    [1.2273168817712259, -0.7094084406382217, 0.8728393214519992, -3.1772765525875535, -1.0961376088451584, 0.00018126898528869617],
    [1.2873204060398695, -0.7053935484907541, 1.4175058122642916, -3.498447508498744, -1.4100681626637148, 0.011752785949352251],
    [1.2878837365271814, -0.7031666274091029, 1.1148442778272036, -3.4998692800300706, -1.4080351227360492, 0.011839536242137072]
]

# Iterate through joint angles based on user input
for joint_angles in joint_angles_list:
    input("Press 'n' and Enter to move to the next pose: ")
    
    # Set the target joint values
    group.set_joint_value_target(joint_angles)
    
    # Plan and execute the motion
    plan = group.plan()
    group.go(wait=True)

print("All poses executed successfully.")

# Shutdown moveit_commander
moveit_commander.roscpp_shutdown()
